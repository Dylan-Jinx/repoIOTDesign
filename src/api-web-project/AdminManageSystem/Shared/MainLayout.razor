@inherits LayoutComponentBase
@using Microsoft.JSInterop
@inject IJSRuntime JSRuntime


<Layout Style="min-height: 100vh; ">
    <Header Class="header">
        <div class="logo">
            <a style="font-weight:bold;font-size:22px;color:white">中小学生营养配餐与食材溯源系统</a>

            <div style="float:right">
                <label style="font-size:20px;font-weight:bold;color:white" id="showTime"></label>
            </div>
        </div>
    </Header>
    <Layout>
        <Sider Width="200" Class="site-layout-background">
            <Menu Mode="MenuMode.Inline" Theme="MenuTheme.Dark"
                  DefaultSelectedKeys=@(new[] { "0" })
                  DefaultOpenKeys=@(new[] { "sub1", "sub2", "sub3" })
                  Style="height: 100%; border-right: 0;">
                @{
                    RenderFragment sub1Title =
                    @<span>
                        <Icon Component="UserMangeSvg" Theme="outline" />
                        <a> 用户管理</a>
                    </span>;
                }
                <SubMenu Key="sub1" Title=sub1Title>
                    <MenuItem Key="1">学生信息</MenuItem>
                    <MenuItem Key="2">家长信息</MenuItem>
                    <MenuItem Key="3">管理员信息</MenuItem>
                </SubMenu>
                @{
                    RenderFragment sub2Title =
                    @<span>
                        <Icon Component="AnalysisSvg" Theme="outline" />
                        食材分析与菜谱
                    </span>;
                }
                <SubMenu Key="sub2" Title=sub2Title>
                    <MenuItem Key="5"><a href="/Nutrition">平台营养素</a></MenuItem>
                    <MenuItem Key="6"><a href="/FoodNutrition">食材营养</a></MenuItem>
                    <MenuItem Key="7"><a href="/CookBooks">菜谱</a></MenuItem>
                </SubMenu>
                @{
                    RenderFragment sub3Title =
                    @<span>
                        <Icon Component="RetrospectSvg" Theme="outline" />
                        食材追溯与溯源
                    </span>;
                }
                <SubMenu Key="sub3" Title=sub3Title>
                    <MenuItem Key="9">食材详情</MenuItem>
                    <MenuItem Key="10">食材溯源</MenuItem>
                </SubMenu>
                @{
                    RenderFragment sub4Title =
                    @<span>
                        <Icon Component="CookHouseSvg" Theme="outline" />
                        食堂管理
                    </span>;
                }
                <SubMenu Key="sub4" Title=sub4Title>
                    <MenuItem Key="11"><a href="/cookhousestaffinfo">人员信息</a></MenuItem>
                    <MenuItem Key="12">入库记录</MenuItem>
                    <MenuItem Key="13">账单查询</MenuItem>
                </SubMenu>
                @{
                    RenderFragment sub5Title =
                    @<span>
                        <Icon Type="setting" Spin Theme="outline" />
                        可视化管理
                    </span>;
                }
                <SubMenu Key="sub5" Title=sub5Title>
                    <MenuItem Key="14"><a href="/baseControl">查看管理</a></MenuItem>
                </SubMenu>
            </Menu>
        </Sider>
        <Layout Style=" padding: 0 24px 24px;" Class="layoutmiddle">
            <Breadcrumb Style="margin: 16px 0;">
                <BreadcrumbItem><a href="/">首页</a></BreadcrumbItem>
                <BreadcrumbItem><a @onclick="goBack">返回上一级</a></BreadcrumbItem>
                <BreadcrumbItem>查看详细</BreadcrumbItem>
            </Breadcrumb>
            <Content Class="site-layout-background" Style=" padding: 24px; margin: 0; min-height: 280px;">
                @Body
            </Content>
            <Footer Style="text-align: center; ">中小学生营养配餐分析与食材溯源系统 ©2020        Rusn b 团队制作                 -技术支持：Ant Design & Ant UED &新大陆   -- 硬件平台：新大陆NLE-AI800边缘计算开发板</Footer>
        </Layout>
    </Layout>
</Layout>

<style>
    .header {
        background: linear-gradient(0.25turn, #3f87a6, #ebf8e1, #f69d3c);
    }

    #components-layout-demo-top-side-2 .logo {
        width: 120px;
        height: 31px;
        background: rgba(255, 255, 255, 0.2);
        margin: 16px 28px 16px 0;
        float: left;
    }

    .site-layout-background {
        background: #fff;
    }

    .layoutmiddle {
        background: linear-gradient(#e66465, #9198e5);
    }
</style>



@code{
    RenderFragment RetrospectSvg =
    @<svg t="1594869681472" class="anticon-spin" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5556" width="1.3em" height="1.3em"><path d="M395.9296 882.1248a332.3392 332.3392 0 0 0 127.6928 25.2928c34.9696 0 69.2224-5.376 101.7856-15.8208a25.6 25.6 0 0 1 15.616 48.7936 384.4096 384.4096 0 0 1-117.4016 18.2272c-51.2 0-101.0176-9.984-147.3024-29.184a25.6 25.6 0 0 1 19.6096-47.3088zM743.8336 322.7648a384.8704 384.8704 0 0 1 155.8528 234.3936 25.6 25.6 0 0 1-50.0736 10.752 333.6704 333.6704 0 0 0-135.168-203.2128 25.6 25.6 0 0 1 29.3888-41.984z m-394.496 0.3072a25.6 25.6 0 0 1-7.4752 35.4304A334.08 334.08 0 0 0 201.9328 549.888a25.6 25.6 0 0 1-49.408-13.5168 385.28 385.28 0 0 1 161.3312-220.672 25.6 25.6 0 0 1 35.4304 7.424zM512.768 76.8a173.4656 173.4656 0 1 0 0 346.88 173.4656 173.4656 0 0 0 0-346.88z m0 51.2a122.2656 122.2656 0 1 1 0 244.48 122.2656 122.2656 0 0 1 0-244.48zM794.368 593.0496a173.4144 173.4144 0 1 0 0 346.88 173.4144 173.4144 0 0 0 0-346.88z m0 51.2a122.2656 122.2656 0 1 1 0 244.48 122.2656 122.2656 0 0 1 0-244.48z" fill="#ffffff" p-id="5557"></path><path d="M231.2192 593.0496a173.4144 173.4144 0 1 0 0 346.88 173.4144 173.4144 0 0 0 0-346.88z m0 51.2a122.2656 122.2656 0 1 1 0 244.48 122.2656 122.2656 0 0 1 0-244.48z" fill="#ffffff" p-id="5558"></path><path d="M512.768 250.2656m-53.9648 0a53.9648 53.9648 0 1 0 107.9296 0 53.9648 53.9648 0 1 0-107.9296 0Z" fill="#ffffff" p-id="5559"></path></svg>;

RenderFragment AnalysisSvg =
@<svg t="1594869765718" class="anticon-spin" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7381" width="1.3em" height="1.3em"><path d="M997.84021333 489.17162667h-54.61333333C931.4304 268.64298667 755.13856 92.35114667 534.60992 80.55466667V25.94133333c0-12.77952-10.37653333-23.15605333-23.15605333-23.15605333s-23.15605333 10.37653333-23.15605334 23.15605333v54.61333334C267.55072 92.35114667 91.25888 268.64298667 79.4624 489.17162667H24.84906667c-6.11669333 0-12.01493333 2.40298667-16.384 6.77205333s-6.77205333 10.26730667-6.77205334 16.384c0 12.77952 10.37653333 23.26528 23.26528 23.26528h54.61333334c11.68725333 220.63786667 187.97909333 396.92970667 408.61696 408.72618667v54.61333333c0 12.77952 10.37653333 23.26528 23.15605333 23.26528s23.15605333-10.37653333 23.15605333-23.26528v-54.61333333C755.13856 932.52266667 931.4304 756.23082667 943.22688 535.70218667h54.61333333c12.77952 0 23.15605333-10.37653333 23.15605334-23.26528 0-12.77952-10.37653333-23.26528-23.15605334-23.26528z m-130.74432 45.21984h8.192c-10.92266667 184.04693333-157.94176 330.9568-341.87946666 341.87946666V868.07893333c0-12.12416-9.8304-21.95456-21.95456-21.95456-12.12416 0-21.95456 9.8304-21.95456 21.95456v8.192c-184.04693333-10.92266667-330.9568-157.94176-341.87946667-341.87946666h8.192c12.12416 0 21.95456-9.8304 21.95456-21.95456 0-12.12416-9.8304-21.95456-21.95456-21.95456h-8.192c10.92266667-184.04693333 157.94176-330.9568 341.87946667-341.87946667v8.192c0 12.12416 9.8304 21.95456 21.95456 21.95456 12.12416 0 21.95456-9.8304 21.95456-21.95456v-8.192c184.04693333 10.92266667 330.9568 157.94176 341.87946666 341.87946667h-8.192c-7.86432 0-15.07328 4.15061333-19.00544 10.92266666-3.93216 6.77205333-3.93216 15.18250667 0 21.95456 3.82293333 6.88128 11.14112 11.03189333 19.00544 11.03189334z m9.17504 0.54613333" p-id="7382" fill="#ffffff"></path><path d="M511.34464 209.76981333c-167.1168 0-302.66709333 135.44106667-302.66709333 302.66709334s135.44106667 302.66709333 302.66709333 302.66709333 302.66709333-135.44106667 302.66709333-302.66709333c0-167.1168-135.55029333-302.66709333-302.66709333-302.66709334z m0 576.17066667C360.28416 785.94048 237.84106667 663.49738667 237.84106667 512.43690667S360.28416 238.93333333 511.34464 238.93333333s273.50357333 122.44309333 273.50357333 273.50357334-122.44309333 273.50357333-273.50357333 273.50357333z m0-27.19744" p-id="7383" fill="#ffffff"></path><path d="M641.4336 591.84469333c-11.14112 0-21.51765333 3.38602667-30.14656 9.17504L564.64725333 552.41386667c9.39349333-12.56106667 15.07328-27.96202667 15.07328-44.89216 0-23.92064-11.35957333-45.21984-28.94506666-58.87317334l21.40842666-25.55904c5.46133333 1.85685333 11.14112 2.83989333 17.25781334 2.83989334 30.03733333 0 54.50410667-24.46677333 54.50410666-54.50410667s-24.46677333-54.50410667-54.50410666-54.50410667-54.50410667 24.46677333-54.50410667 54.50410667c0 16.384 7.31818667 31.1296 18.89621333 41.17845333l-21.40842666 25.44981334c-8.51968-3.38602667-17.69472-5.24288-27.30666667-5.24288-16.93013333 0-32.44032 5.67978667-45.00138667 15.18250666L431.39072 419.15733333c2.94912-5.35210667 4.58752-11.35957333 4.58752-17.91317333 0-20.64384-16.71168-37.35552-37.35552-37.35552-20.64384 0-37.35552 16.71168-37.35552 37.35552 0 20.64384 16.71168 37.35552 37.35552 37.35552 6.44437333 0 12.45184-1.6384 17.69472-4.47829333l28.83584 28.94506666c-9.28426667 12.45184-14.7456 27.74357333-14.7456 44.45525334 0 14.85482667 4.36906667 28.72661333 11.90570667 40.41386666l-25.99594667 27.52512c-9.06581333-6.77205333-20.31616-10.92266667-32.54954667-10.92266666-30.03733333 0-54.50410667 24.46677333-54.50410666 54.50410666s24.46677333 54.50410667 54.50410666 54.50410667 54.50410667-24.46677333 54.50410667-54.50410667c0-10.15808-2.83989333-19.6608-7.75509333-27.8528l25.66826666-27.30666666c13.1072 11.35957333 30.14656 18.35008 48.82432 18.35008 16.71168 0 32.11264-5.57056 44.56448-14.85482667l46.53056 48.49664c-5.89824 8.73813333-9.28426667 19.11466667-9.28426666 30.36501333 0 30.03733333 24.46677333 54.50410667 54.50410666 54.50410667s54.50410667-24.46677333 54.50410667-54.50410667c0.10922667-29.92810667-24.35754667-54.39488-54.39488-54.39488z m-51.99189333-247.61685333c14.96405333 0 27.19744 12.23338667 27.19744 27.19744s-12.12416 27.19744-27.19744 27.19744c-14.96405333 0-27.19744-12.23338667-27.19744-27.19744s12.23338667-27.19744 27.19744-27.19744zM383.76789333 645.80266667c-14.7456 0-26.65130667-11.90570667-26.65130666-26.65130667 0-14.7456 11.90570667-26.65130667 26.65130666-26.65130667 14.7456 0 26.65130667 11.90570667 26.65130667 26.65130667 0 14.63637333-12.01493333 26.65130667-26.65130667 26.65130667z m257.66570667 27.63434666c-14.96405333 0-27.08821333-12.12416-27.08821333-27.08821333 0-14.96405333 12.12416-27.08821333 27.08821333-27.08821333 14.96405333 0 27.08821333 12.12416 27.08821333 27.08821333 0 14.96405333-12.23338667 27.08821333-27.08821333 27.08821333z m2.73066667 7.20896" p-id="7384" fill="#ffffff"></path></svg>;

RenderFragment CookHouseSvg =
@<svg t="1594870621885" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8550" width="1.3em" height="1.3em"><path d="M653.632 512c13.888 37.952 47.936 64.832 87.488 64.832 9.344 0 18.304-1.536 26.88-4.352v215.04c0 20.032-19.84 44.48-37.76 44.48H229.76c-17.92 0-37.76-24.448-37.76-44.416V572.48c8.576 2.816 17.536 4.352 26.88 4.352 39.68 0 73.6-26.88 87.488-64.832 14.72 39.488 48.832 65.088 86.592 64.832 39.616 0 73.6-26.88 87.488-64.832 14.72 39.488 48.832 65.024 86.592 64.832 37.76 0.256 71.936-25.344 86.592-64.832z m71.488-320c9.408 0.512 25.6 2.176 31.36 18.56l68.928 165.952c0.256 1.216 0.576 2.368 0.896 3.328 3.84 10.816 5.696 21.76 5.696 32.64a99.84 99.84 0 0 1-54.08 88.256c-13.44 7.104-30.144 10.752-49.664 10.88a103.808 103.808 0 0 1-88.32-47.808 45.44 45.44 0 0 0-7.872-12.16 37.248 37.248 0 0 0-28.416-11.52 37.632 37.632 0 0 0-28.608 11.84 48.192 48.192 0 0 0-7.68 11.84 103.872 103.872 0 0 1-87.04 47.872 104 104 0 0 1-87.68-48c-1.344-2.624-3.584-7.04-7.04-10.88-13.952-16-45.184-15.232-57.344-1.152a45.824 45.824 0 0 0-8.32 12.736c-19.2 29.696-52.096 47.488-88.064 47.616-15.36 0-28.864-2.24-40.448-6.592l-8.32-3.712A99.84 99.84 0 0 1 128 413.12c0-11.008 1.92-22.08 5.696-32.896a26.048 26.048 0 0 0 0.704-2.496l73.6-168.32c1.536-4.288 6.08-17.408 28.992-17.408h488.128z" fill="#D8D8D8" p-id="8551"></path><path d="M951.424 386.432a28.736 28.736 0 0 0-1.92-6.72l-75.712-188.544c-13.12-39.104-50.816-63.04-94.848-63.168H247.36c-44.608 0-79.36 23.744-91.904 61.312L74.048 381.632a41.28 41.28 0 0 0-1.152 4.48A177.536 177.536 0 0 0 158.208 598.4v0.064c23.936 12.8 51.968 19.2 83.584 19.2a176.96 176.96 0 0 0 135.616-63.296c33.28 39.552 82.048 62.72 134.976 63.04 52.48-0.448 101.056-23.68 134.208-63.168a176.512 176.512 0 0 0 135.936 63.04c32.192-0.128 60.8-6.976 84.928-20.16a177.728 177.728 0 0 0 83.968-210.688z m-90.624 257.664c15.808 0 29.056 11.392 31.744 26.496l0.512 5.76 0.064 176.256c0 42.752-32.576 78.08-74.24 82.432l-8.384 0.448-608 0.384c-42.752 0-78.08-32.64-82.304-74.24l-0.448-8.32-0.192-173.184c0-15.872 11.392-29.056 26.432-31.872l5.76-0.512c15.936 0 29.12 11.392 31.872 26.432l0.512 5.76 0.256 173.312c0 8.512 5.952 15.68 14.016 17.536l4.16 0.448 607.808-0.384a18.24 18.24 0 0 0 17.664-14.016l0.512-4.16-0.064-176.256c0-17.92 14.464-32.32 32.32-32.32z m-81.792-451.392c10.24 0.64 27.904 2.432 34.176 20.864l75.072 186.944c0.256 1.408 0.64 2.688 0.96 3.776a113.024 113.024 0 0 1-52.672 136.192c-14.656 7.936-32.896 12.032-54.08 12.16a112.192 112.192 0 0 1-96.192-53.824 51.456 51.456 0 0 0-8.576-13.632 39.936 39.936 0 0 0-31.04-12.992 40.32 40.32 0 0 0-31.104 13.312 54.528 54.528 0 0 0-8.448 13.376 112.32 112.32 0 0 1-94.784 53.888 112.384 112.384 0 0 1-95.488-54.016c-1.472-3.008-3.84-8-7.68-12.224-15.168-18.112-49.152-17.216-62.4-1.408a51.84 51.84 0 0 0-9.088 14.336 113.024 113.024 0 0 1-95.936 53.696c-16.64 0-31.424-2.56-44.096-7.488l-9.024-4.16h-0.064a112.96 112.96 0 0 1-53.76-136.768 30.08 30.08 0 0 0 0.768-2.816l80.192-189.568c1.664-4.864 6.656-19.648 31.552-19.648h531.712z" fill="#666666" p-id="8552"></path></svg>;

RenderFragment UserMangeSvg =
@<svg t="1594870761286" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9314" width="1.3em" height="1.3em"><path d="M870.314 877.39C777.938 967.975 651.552 1024 512 1024 229.24 1024 0.018 794.742 0.018 511.981 0.018 229.221 229.24 0 512 0s511.982 229.222 511.982 511.982c0 143.21-58.914 272.485-153.668 365.41zM512 950.86c103.932 0 199.307-36.314 274.496-96.728C746.45 740.398 639.447 658.262 512 658.262c-127.447 0-234.451 82.136-274.496 195.87C312.693 914.546 408.068 950.86 512 950.86z m0-877.684c-242.35 0-438.842 196.492-438.842 438.842 0 109.528 40.374 209.4 106.712 286.308C237.724 672.597 364.513 585.158 512 585.158c147.45 0 274.276 87.44 332.13 213.168 66.338-76.87 106.712-176.78 106.712-286.308 0-242.35-196.492-438.842-438.842-438.842z m0 475.412c-101.007 0-182.85-81.88-182.85-182.85 0-101.007 81.843-182.851 182.85-182.851 100.97 0 182.85 81.844 182.85 182.85 0 100.97-81.88 182.851-182.85 182.851z m0-292.561c-60.597 0-109.71 49.114-109.71 109.674 0 60.596 49.113 109.71 109.71 109.71 60.597 0 109.71-49.114 109.71-109.71 0-60.56-49.113-109.674-109.71-109.674z" fill="#ffffff" p-id="9315"></path></svg>;
}

@code{

    protected override Task OnInitializedAsync()
    {
        return base.OnInitializedAsync();
    }

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            JSRuntime.InvokeVoidAsync("getTime", null);
        }
        base.OnAfterRender(firstRender);
    }

    public bool goBackFlag = false;

    void goBack(EventArgs e)
    {
        goBackFlag = true;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            goBackFlag = false;
        }
        if (goBackFlag)
        {
            await JSRuntime.InvokeVoidAsync("goBack", null);
            firstRender = false;
            goBackFlag = false;
        }
    }
}



